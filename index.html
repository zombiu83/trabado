<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trabado</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<style>
@font-face{
  font-family:"TrabadoFont";
  src:url("fonts/pixelgamer-regular.otf");
}
body{
  margin:0;
  height:100vh;
  background:url("img/fondo.jpg") center/cover no-repeat;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui;
}

#menu{
  background:rgba(0,0,0,.55);
  padding:40px 30px;
  border-radius:20px;
  text-align:center;
  color:white;
}

#title{
  font-size:48px;
  font-weight:900;
  margin-bottom:30px;
  color:#66cdaa;
  animation:bounce 1s infinite ease-in-out;
  font-family:"TrabadoFont", system-ui;
}

@keyframes bounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-12px)}
}

.menu-btn{
  width:200px;
  padding:14px;
  margin:10px 0;
  border:none;
  border-radius:14px;
  font-size:18px;
  font-weight:bold;
  cursor:pointer;
  background:#1e3a8a;
  color:white;
}

#introOverlay{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:10000;
}
#introOverlay img{ max-width:80%; }
#introOverlay span{ margin-top:20px;color:white;opacity:.7; }
</style>
</head>

<body>

<audio id="menuMusic" src="sounds/juego.mp3" loop></audio>

<div id="introOverlay">
  <img src="img/zombius.png">
  <span>Toc√° para empezar</span>
</div>

<div id="menu">
  <div id="title">TRABADO</div>
  <button class="menu-btn" onclick="location.href='juego.html'">JUGAR</button>
  <button class="menu-btn" onclick="location.href='reglas.html'">REGLAS</button>
</div>

<script>
let audioCtx = null;
const overlay = document.getElementById("introOverlay");
const music   = document.getElementById("menuMusic");

function unlockAudio(){
  if(!audioCtx){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }
  if(audioCtx.state === "suspended"){
    audioCtx.resume();
  }
}

overlay.addEventListener("click", () => {
  unlockAudio();              // üîë DESBLOQUEO REAL
  music.volume = 0.5;
  music.play();               // üéµ ahora s√≠
  overlay.style.display="none";
  sessionStorage.setItem("introSeen","1");
});

if(sessionStorage.getItem("introSeen")){
  overlay.style.display="none";
  document.body.addEventListener("click",()=>{
    unlockAudio();
    music.play();
  },{once:true});
}

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
